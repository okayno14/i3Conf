#!/usr/bin/escript

%%--------------------------------------------------------------------
%% @doc
%% @end
-spec main(term()) ->
    StatusCode :: non_neg_integer().
%%--------------------------------------------------------------------
main(_) ->
    io:setopts([{encoding, unicode}]),
    print_layout(get_current_layout()),
    io:format("~n", []),
    io:format("~n", []),
    0.
%%--------------------------------------------------------------------

%%--------------------------------------------------------------------
%% @doc
%% @end
-spec get_current_layout() ->
    Layout :: nonempty_string().
%%--------------------------------------------------------------------
get_current_layout() ->
    Status = os:cmd("xkb-switch"),
    string:trim(Status, both, "\n").
%%--------------------------------------------------------------------

%%--------------------------------------------------------------------
%% @doc
%% @end
-spec print_layout(Layout :: nonempty_string()) ->
    ok.
%%--------------------------------------------------------------------
print_layout(Layout) ->
    io:format("~ts~n", [map_layout_to_emoji(Layout)]).
%%--------------------------------------------------------------------

%%--------------------------------------------------------------------
%% @doc
%% @end
-spec map_layout_to_emoji(Layout :: nonempty_string()) ->
    Emoji :: nonempty_string().
%%--------------------------------------------------------------------
map_layout_to_emoji("ru") ->
    "ðŸ‡·ðŸ‡º";

map_layout_to_emoji("us") ->
    "ðŸ‡ºðŸ‡¸".
%%--------------------------------------------------------------------

